<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>カタカナカラ</title>
    <link rel="stylesheet" href="style.css">
    
    <!-- APIキー設定 - HTMLに直接埋め込み -->
    <script>
    // config.jsが読み込めない場合のフォールバック
    var CONFIG = {
        GOOGLE_TRANSLATE_API_KEY: 'AIzaSyBMBBy6FWq_AJCPSsvAYOmjlOEhR6G08Ro'
    };
    window.CONFIG = CONFIG;
    </script>
    
    <!-- config.js があれば読み込む (無視されても問題なし) -->
    <script>
    (function() {
        var configScript = document.createElement('script');
        configScript.src = 'config.js';
        configScript.onerror = function() {
            console.log('config.jsの読み込みに失敗しました。デフォルト設定を使用します。');
        };
        document.head.appendChild(configScript);
    })();
    </script>
    
    <!-- kuroshiro関連のライブラリ - CDNから直接読み込み (JSDelivrからの読み込み) -->
    <script>
    // ライブラリ読み込み状態の監視
    window.libraryStatus = {
        kuroshiro: false,
        analyzer: false
    };
    </script>
    
    <script src="https://cdn.jsdelivr.net/npm/kuroshiro@1.2.0/dist/kuroshiro.min.js" 
            onload="window.libraryStatus.kuroshiro = true; console.log('Kuroshiro読み込み成功');"
            onerror="console.error('Kuroshiro読み込み失敗');">
    </script>
    
    <script src="https://cdn.jsdelivr.net/npm/kuroshiro-analyzer-kuromoji@1.1.0/dist/kuroshiro-analyzer-kuromoji.min.js"
            onload="window.libraryStatus.analyzer = true; console.log('KuromojiAnalyzer読み込み成功');"
            onerror="console.error('KuromojiAnalyzer読み込み失敗');">
    </script>
    
    <!-- 別のソースからもKuroshiroを読み込み試行 -->
    <script>
    // 最初のCDNが失敗した場合に別のCDNを試す
    setTimeout(function() {
        if (!window.libraryStatus.kuroshiro) {
            console.log('別のCDNからKuroshiroを読み込み試行中...');
            var script1 = document.createElement('script');
            script1.src = 'https://unpkg.com/kuroshiro@1.2.0/dist/kuroshiro.min.js';
            script1.onload = function() { 
                window.libraryStatus.kuroshiro = true; 
                console.log('Kuroshiro(unpkg)読み込み成功');
            };
            document.head.appendChild(script1);
        }
        
        if (!window.libraryStatus.analyzer) {
            console.log('別のCDNからKuromojiAnalyzerを読み込み試行中...');
            var script2 = document.createElement('script');
            script2.src = 'https://unpkg.com/kuroshiro-analyzer-kuromoji@1.1.0/dist/kuroshiro-analyzer-kuromoji.min.js';
            script2.onload = function() { 
                window.libraryStatus.analyzer = true; 
                console.log('KuromojiAnalyzer(unpkg)読み込み成功');
            };
            document.head.appendChild(script2);
        }
    }, 2000);
    </script>
    
    <!-- グローバルKuroshiro確認用 -->
    <script>
    window.onload = function() {
        console.log('ページ読み込み完了。ライブラリ状態:');
        console.log('Kuroshiro存在:', typeof Kuroshiro === 'function');
        console.log('KuromojiAnalyzer存在:', typeof KuromojiAnalyzer === 'function');
        console.log('window.Kuroshiro存在:', typeof window.Kuroshiro === 'function');
    };
    </script>
    
    <!-- アイコンフォント -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="page-container">
        <header>
            <h1>カタカナカラ</h1>
            <p class="subtitle">テキストヲ ニュウリョクスルト ジドウデ カタカナニ ヘンカンシマス</p>
        </header>

        <main class="content-container">
            <div class="input-container">
                <h2><i class="fas fa-keyboard"></i> ニュウリョク</h2>
                <label for="input-text" class="visually-hidden">入力テキスト</label>
                <textarea id="input-text" placeholder="テキストを入力してください..."></textarea>
                <div class="status-indicator" id="status-indicator">
                    <span class="loading-spinner"><i class="fas fa-circle-notch fa-spin"></i></span>
                    <span class="status-text">ショリチュウ...</span>
                </div>
            </div>
            
            <div class="output-container">
                <h2><i class="fas fa-language"></i> カタカナ ケッカ</h2>
                <label for="output-text" class="visually-hidden">変換結果</label>
                <div id="output-text" class="output-box" role="textbox" aria-readonly="true"></div>
                <button id="copy-btn" class="action-button"><i class="fas fa-copy"></i> コピー</button>
            </div>
        </main>
        
        <footer>
            <p>Powered by Google Translation API & Kuroshiro</p>
            <div class="credits">
                <span><i class="fas fa-code"></i> with <i class="fas fa-heart"></i></span>
            </div>
        </footer>
    </div>
    
    <!-- 後にscript.jsを読み込み -->
    <script src="script.js"></script>
</body>
</html> 